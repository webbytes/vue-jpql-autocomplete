(function(e){function t(t){for(var s,i,u=t[0],a=t[1],l=t[2],c=0,g=[];c<u.length;c++)i=u[c],r[i]&&g.push(r[i][0]),r[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);p&&p(t);while(g.length)g.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,u=1;u<n.length;u++){var a=n[u];0!==r[a]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={app:0},o=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue-jpql-autocomplete/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("e2a1"),r=n.n(s);r.a},"3f8c":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}.autosuggest,.autosuggest__results-container,div{width:100%}.autosuggest>input:invalid,input.autosuggest[aria-invalid=true]{border-color:red}.autosuggest__results{margin:0;position:absolute;z-index:10000001;width:calc(100% - 20px);border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding:0;border:1px solid silver;background:#fff;overflow:scroll;max-height:400px}.autosuggest__results ul{-webkit-padding-start:10px;padding-inline-start:10px}.autosuggest__results ul li{list-style:none;display:block;text-align:left}li.autosuggest__results-before.autosuggest__results-before--default{font-style:italic;font-size:smaller}#app,details,pre{text-align:left}",""])},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._v("\n  Simple auto complete:\n  "),n("vue-jpql-autocomplete",{attrs:{"field-settings":e.fieldSettings}}),n("br"),e._m(0),n("br"),n("br"),e._v("\n  Auto complete with more options and slots:\n  "),n("vue-jpql-autocomplete",{ref:"autocomplete",attrs:{placeholder:"enter query here...","field-settings":e.fieldSettings,operators:["=","<>",">",">=","<","<=","LIKE","IN"]},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.suggestion;return[e._v("\n      "+e._s(n.name)+": "+e._s(n.item)+"\n    ")]}}]),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e.query?[e._v("\n    The query typed is "+e._s(e.query)+" which is "+e._s(e.$refs.autocomplete.isValid?"valid":"invalid")+".\n  ")]:e._e(),n("br"),n("details",[n("summary",[e._v("Template")]),n("pre",[e._v("    <vue-jpql-autocomplete \n      ref=\"autocomplete\"\n      v-model=\"query\"\n      placeholder=\"enter query here...\" \n      :field-settings=\"fieldSettings\"\n      :operators=\"['=','<>','>','>=','<','<=']\">\n      <template v-slot=\""+e._s("{suggestion}")+'">\n        '+e._s("{{suggestion.name}}")+": "+e._s("{{suggestion.item}}")+'\n      </template>\n    </vue-jpql-autocomplete>\n    <template v-if="query">\n      The query typed is '+e._s("{{ query }}")+" which is "+e._s("{{ $refs.autocomplete.isValid ? 'valid' : 'invalid' }}")+".\n    </template>\n    ")])]),n("br"),n("br"),e._v("\n    Styling and script:\n    "),e._m(1),e._m(2)],2)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("details",[n("summary",[e._v("Template")]),n("pre",[e._v('    <vue-jpql-autocomplete :field-settings="fieldSettings"/>\n    ')])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("details",[n("summary",[e._v("Style")]),n("pre",[e._v('    div, .autosuggest, .autosuggest__results-container {\n      width: 100%;\n    }\n    .autosuggest > input:invalid, input.autosuggest[aria-invalid="true"] {\n      border-color: red;\n    }\n    .autosuggest__results {\n      margin: 0;\n      position: absolute;\n      z-index: 10000001;\n      width: calc(100% - 20px);\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      padding: 0;\n      border: silver solid 1px;\n      background: white;\n      overflow: scroll;\n      max-height: 400px;\n    }\n    .autosuggest__results ul {\n      padding-inline-start: 10px;\n    }\n    .autosuggest__results ul li {\n      list-style: none;\n      display: block;\n      text-align: left;\n    }\n    li.autosuggest__results-before.autosuggest__results-before--default {\n      font-style: italic;\n      font-size: smaller;\n    }\n    ')])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("details",[n("summary",[e._v("Script")]),n("pre",[e._v("      import VueJpqlAutocomplete from '@webbytes/vue-jpql-autocomplete'\n\n      export default {\n        name: 'app',\n        components: {\n          VueJpqlAutocomplete\n        },\n        data: function() {\n          return {\n            query: '',\n            fieldSettings: [\n              { name: 'status', values: ['Open','Closed'], type: 'text' },\n              { name: 'id', type: 'number' },\n              { name: 'description', type: 'text' }\n            ]\n          }\n        }\n      }        \n    ")])])}],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-autosuggest",{ref:"autosuggest",attrs:{suggestions:e.suggestions,"input-props":{placeholder:e.placeholder,class:"autosuggest"},"get-suggestion-value":e.suggestionSelected},on:{input:e.onInputChange,focus:e.logEvent,selected:e.focusInputBox},scopedSlots:e._u([e._l(e.$scopedSlots,function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}})],null,!0),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[e._l(e.$slots,function(t,n){return e._t(n,null,{slot:n})})],2)},u=[],a=(n("6762"),n("2fdb"),n("ac6a"),n("3b2b"),n("a481"),n("28a5"),n("7f7f"),n("55dd"),n("2831")),l=n("7d94"),p=n.n(l),c={name:"VueJpqlAutocomplete",components:{VueAutosuggest:a["a"]},data:function(){return{token:"",tokens:[],tokenType:0,suggestions:[],query:"",sqlParser:new p.a}},props:{value:{type:String,default:""},placeholder:{type:String,default:"Type query here..."},operators:{type:Array,default:function(){return["=","<>",">",">=","<","<="]}},fieldSettings:{type:Array,default:function(){return[{name:"status",values:["Open","Closed"],type:"text"},{name:"id",type:"number"},{name:"description",type:"text"}]}}},computed:{fieldSuggestions:function(){return this.fieldSettings.map(function(e){return e.name}).sort()},isValid:function(){var e=this.query;try{e=this.sqlParser.parse(this.query)}catch(n){return!1}var t=!e||e&&"string"!==typeof e&&-1==JSON.stringify(e).indexOf("null");return this.$refs.autosuggest.$el.querySelector("input.autosuggest").setAttribute("aria-invalid",t?"false":"true"),t}},methods:{logEvent:function(){},focusInputBox:function(){this.$refs.autosuggest.$el.querySelector("input.autosuggest").focus()},suggestionSelected:function(e){var t=this.token;if(this.tokens["operator2"]&&"IN"==this.tokens["operator2"].trim().toUpperCase()){var n=t.replace(/[[\]]/gi,"").split(",").map(function(e){return e.replace(/'/g,"").trim()});t=n.length>0?n[n.length-1]:""}return this.query=this.query.substring(0,this.searchBox.selectionStart).replace(new RegExp(t+"$"),e.item)+this.query.substring(this.searchBox.selectionStart),this.$emit("input",this.query),this.query},onInputChange:function(e){this.$emit("input",e);var t=e.substring(0,this.searchBox.selectionStart).trimStart();if(this.token="",this.tokenType="field",t.length>0){if(t=" "+t.replace(this.multiSpaceRegex," ").replace(this.inBracketRegex,"IN [$1]").replace(this.bracketsRegex,"").replace(this.multiSpaceRegex," "),this.tokens=new RegExp(this.regex,"ig").exec(t),!this.tokens)return;this.tokens=this.tokens.groups;for(var n=["logicalop","values","operator","field"],s=0;s<n.length;s++){var r=n[s];if(this.token=this.tokens[r+"3"]||this.tokens[r+"2"]||this.tokens[r+"1"]||this.tokens[r],this.token){this.tokenType=r,this.token=this.token.trim();break}}}switch(this.tokenType){case"field":this.suggestFields(this.token);break;case"operator":this.suggestOperators(this.token);break;case"values":this.suggestValues(this.token);break;case"logicalop":this.suggestLogicalOps(this.token);break}},suggestFields:function(e){e=e.toLowerCase(),this.suggestions=[{label:"Fields",data:this.fieldSuggestions.filter(function(t){return t.toLowerCase().indexOf(e)>-1})}]},suggestOperators:function(e){e=e.toUpperCase(),this.suggestions=[{label:"Operators",data:this.operators.filter(function(t){return t.indexOf(e)>-1})}]},suggestValues:function(e){var t=[],n=this.tokens["field2"].trim();e.length>0&&"IN"==this.tokens["operator2"].trim().toUpperCase()&&(t=e.replace(/[[\]]/gi,"").split(",").map(function(e){return e.replace(/'/g,"").trim()}),e=t.length>0?t[t.length-1].toLowerCase():"");var s=this.fieldSettings.filter(function(e){return e.name==n})[0],r=["''"];s.values&&(r=s.values?s.values.filter(function(n){return!t.includes(n)&&n.toLowerCase().indexOf(e)>-1}):null,"text"==s.type&&(r=r.map(function(e){return"'"+e+"'"}))),this.suggestions=[{label:s.values?"Values":"Hint: Provide a ".concat(s.type||"text"," value for ").concat(n,"."),data:r}]},suggestLogicalOps:function(){this.suggestions=[{name:"Logical Operators",data:["AND","OR"]}]}},mounted:function(){this.suggestFields(""),this.searchBox=this.$refs.autosuggest.$el.querySelector("input.autosuggest");var e=this.operators.sort(function(e,t){return t.length-e.length}).join("|"),t="(?<field3>[\\s](?!and|or)[\\w]+)";this.regex="(?:".concat(t,"(?<operator3>[\\s](?:").concat(e,"))(?<values3>[\\s](?:[\\w]+|'[\\w\\s%]*'|\\[[\\w%,\\s']*\\]))(?<logicalop3>[\\s](?:AND|OR)?)|(?<field2>[\\s](?!and|or)[\\w]+)(?<operator2>[\\s](?:").concat(e,"))(?<values2>[\\s](?:[\\w]+|'[\\w\\s%]*'?|\\[[\\w%,\\s']*\\]?)?)|(?<field1>[\\s](?!and|or)[\\w]+)(?<operator1>[\\s](?:").concat(e,")?)|(?<field>[\\s](?!and|or)[\\w]*))$")},created:function(){this.bracketsRegex=/[()]/g,this.inBracketRegex=/IN\s\(([',\s\w]*)\)?/gi,this.multiSpaceRegex=/\s\s+/g}},g=c,f=n("2877"),d=Object(f["a"])(g,i,u,!1,null,null,null),h=d.exports,m={name:"app",components:{VueJpqlAutocomplete:h},data:function(){return{query:"",fieldSettings:[{name:"status",values:["Open","Closed"],type:"text"},{name:"id",type:"number"},{name:"description",type:"text"}]}}},v=m,y=(n("034f"),Object(f["a"])(v,r,o,!1,null,null,null)),b=y.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(b)}}).$mount("#app")},e2a1:function(e,t,n){var s=n("3f8c");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=n("499e").default;r("1f50beb8",s,!0,{sourceMap:!1,shadowMode:!1})}});
//# sourceMappingURL=app.31d9a2eb.js.map